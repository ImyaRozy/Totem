<div class="row content">
    <ng-include src=" '/partials/navigation.html' "></ng-include>
	<div class="small-4 columns build-background overflow-container">
        <div class="row row-full-width">
            <div class="small-12">
                <div class="totem-view-container">
                    <div class="totem-title row row-full-width">
                        <div class="small-12 pagination-centered">
                            <div class="title-container">
                                <input type="text" id="editFlowNameInput" ng-show="editingFlowName" ng-model="totemFlow.name"ui-keypress="{enter: 'endEditFlowName()'}" >
                                <h3 ng-show="!editingFlowName" ng-bind="totemFlow.name" ng-dblclick="startEditFlowName()"></h3>
                            </div>
                        </div>
                    </div>
                    <ul id="totemBlocksList" ng-model="totemBlocks" ui-sortable="sortableTotemBlocks">
                        <li id={{totemBlock.position}} ng-repeat="totemBlock in totemBlocks" ng-animate=" 'animate' ">
                            <div class="totem-block" data-position={{totemBlock.position}} ng-class="{'selectedBlock': $index==selectedBlockIndex, 'monkey-block':totemBlock.totem_type == 'monkey', 'face-block':totemBlock.totem_type == 'face', 'bear-block':totemBlock.totem_type == 'bear'}" ng-click="setSelectedBlock(totemBlock, $index)">
<!--                                 <p>selected block index: {{selectedBlockIndex}}</p>
                                <p>position: {{totemBlock.position}}</p>
                                <p>id: {{totemBlock.id}} </p>
 
 -->                            </div>
                        </li>
                    </ul>
                </div>
    		</div>
    	</div>
	</div>
	<div class="small-7 columns build-background overflow-container">
		<div class="row row-full-width">
			<div class="small-12 pagination-centered">
    			<div class="title-container">
                    <input type="text" id="editTitleInput" ui-keypress="{enter: 'endEditTitle()'}" ng-show="editingBlockTitle" ng-model="totemBlocks[selectedBlockIndex].title">
                    <h3 ng-bind="totemBlocks[selectedBlockIndex].title" ng-dblclick="startEditTitle()" ng-show="!editingBlockTitle">
                    </h3>
                </div>
    		</div>
    	</div>
    	<div class="row">
			<div class="small-11 small-offset-1">
                <div class="content-container">
                    <textarea class="content-input" id="editContentInput" name="Text1" cols="40" rows="5" ui-keypress="{enter: 'endEditContent()'}" ng-show="editingBlockContent" ng-model="totemBlocks[selectedBlockIndex].content" /> 
        			<p ng-bind-html="totemBlocks[selectedBlockIndex].content | linky" ng-dblclick="startEditContent()" ng-show="!editingBlockContent">
        			</p>
                </div>
    		</div>
    	</div>
    	<div class="row">
			<div class="small-12 pagination-centered">
                <h2 ng-show=" !totemBlocks.length" ng-click="addBlock()">
                    <div data-alert class="alert-box" ng-bind="getStartedMessage">
                    </div>
                </h2>
                <div id="drop-target" ng-show='totemBlocks.length'>
                    <div>Drop Pics Here</div>
                </div>
                <img id="uploadPreview" ng-show="totemBlocks[selectedBlockIndex].block_image_url" ng-src={{totemBlocks[selectedBlockIndex].block_image_url}}></img>
    		</div>
    	</div>
	</div>
	<div class="small-1 columns sidebar full">
		<ng-include src=" 'partials/sidebar.html' "></ng-include>
	</div>
</div>